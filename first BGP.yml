  - hosts: R4

    tasks:

       - name: configure interface settings
         ios_interface:
          name: GigabitEthernet0/2
          enable: true

              - no shut
              - ip address 172.16.1.1 255.255.255.0
          parents: interface GigabitEthernet0/1
         ios_config:
          lines:
              - no shut
              - ip address 172.16.2.1 255.255.255.0
          parents: interface GigabitEthernet0/2

         ios_config:
          lines:
              - no shut
              - ip address 172.16.3.1 255.255.255.0
          parents: interface GigabitEthernet0/3


  - hosts: R4

    tasks:

       - name: BGP
         ios_config:
          lines:
              - neighbor 10.0.0.2 remote-as 200
              - neighbor 10.1.4.2 remote-as 400
              -
              - redistribute connected
          parents: Router BGP 400
